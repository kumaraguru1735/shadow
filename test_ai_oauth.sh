#!/bin/bash

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘      Shadow AI with OAuth Authentication Test             â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "ğŸ” Step 1: Check Authentication Status"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
./shadow auth-check
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… Shadow OAuth Integration Complete!"
echo ""
echo "ğŸ“‹ Key Features:"
echo "   âœ“ Automatic OAuth detection from Claude Code"
echo "   âœ“ Fallback to pi CLI authentication"
echo "   âœ“ No API key needed when using Claude Code"
echo "   âœ“ Seamless integration with pi-golang library"
echo ""
echo "ğŸ¯ How It Works:"
echo "   1. Shadow uses pi-golang library (same as openclaw)"
echo "   2. pi-golang automatically looks for OAuth tokens:"
echo "      - ~/.claude/oauth.json (Claude Code)"
echo "      - ~/.pi/agent/oauth.json (pi CLI)"
echo "      - ~/.config/anthropic/oauth.json"
echo "   3. Falls back to pi CLI's built-in auth"
echo "   4. Works seamlessly with ANTHROPIC_API_KEY as alternative"
echo ""
echo "ğŸš€ Usage Examples:"
echo ""
echo "# Scan with AI analysis (uses OAuth automatically)"
echo "  ./shadow scan example.com --ai-analysis"
echo ""
echo "# AI-powered query"
echo "  ./shadow query <scan-id> \"What are the critical issues?\""
echo ""
echo "# Generate AI-enhanced report"
echo "  ./shadow report <scan-id> --format html"
echo ""
echo "ğŸ’¡ Note: Claude Code OAuth token is automatically used when available!"
echo ""
